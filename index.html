<!DOCTYPE HTML>
<html>
    <head>
  	  <title>EnochPrepared</title>
        <script>var Parse;</script>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="//code.jquery.com/jquery-1.9.1.js"></script>
        <script src="//code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <script src="//www.parsecdn.com/js/parse-1.2.6.min.js"></script>
        <script>
            Parse.initialize("XGceIjJFr8yDdpjhuaVcCkyOnQBwUJ2bpMOFt2CO", "RVqgJfG0wo8S4TDbbLkmkfxIeRLYqSVv8DbXuauz");
            alert('parse initialized' + $ + Parse)
            var loginView = Parse.View.extend({
                  tagName: 'div',
                  template: "<div>Username:<input type='text' /><br />password:<input type='password' /><br /><button>login</button></div>",
                  events: {
                      'click button': 'login'
                  },
                  render: function(){
                      this.$el.html(this.template)
                      return this;
                  },
                  login: function(){
                      alert(this.$('input').first().val())
                      alert(this.$('input').last().val())
                      Parse.User.login({
                          username: this.$('input').first().val(),
                          password:this.$('input').last().val(),
                          success: function(){
                              alert(Parse.User.current().get('name'))
                          }
                      })
                  }
            });
            var itemView = Parse.View.extend({
                  tagName: 'div',
                  template: "<div>list of items</div>",
                  render: function(){
                      this.$el.html(this.template)
                      return this;
                  }
            });
            function sendMail(){
                alert('sending mail');                
            }
            $(document).ready(function(){
                var currentUser = Parse.User.current();
                alert(currentUser)
                if (!currentUser){
                    var view = new loginView();
                    var html = view.render().$el;
                    $('#mainview').html(html)
                }
                else
                    $('#mainview').html("<p>Welcome " + currentUser.name + '</p>')
            })
        </script>
		</head>
    <body>
        <div id="bodyview">
            
            <div id="mainview">
                Hello EnochPrepared with empty view box.
            </div>
        </div>
        <script>
            
        </script>
    </body>
</html>
